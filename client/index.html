<!DOCTYPE html>
<html>
<head>
<title>Музыкальная студия</title>
<link rel="stylesheet" type="text/css" href="styles/styles.css">
<link rel="stylesheet" href="styles/all.min.css" />

</head>
<body>
    <div id="app">
      <div v-if="!globalLoading" v-cloak class="main_container">
      <div v-if="showModal" id="modal-box">
        <div id="modal">
          <button v-if="modalWindowName != 'loading'" @click="showModalFunc" style="background-color: rgb#bdbdbd;float: right;">X</button>
          <button v-else disabled style="background-color: rgb#bdbdbd;float: right;">X</button>
          <div v-if="modalWindowName == 'main'">
            <div class="modal-title">
              {{settingsObject.name}}
            </div>
            <ul>
              <div class="modal_btn_info" @click="modalWindowName = 'trackinfo'">
                <svg xmlns="http://www.w3.org/2000/svg" fill="#000000" width="32" height="32" viewBox="0 0 32 32" version="1.1">
                  <path d="M18 23l-1-0v-8.938c0-0.011-0.003-0.021-0.003-0.031s0.003-0.020 0.003-0.031c0-0.552-0.448-1-1-1h-2c-0.552 0-1 0.448-1 1s0.448 1 1 1h1v8h-1c-0.552 0-1 0.448-1 1s0.448 1 1 1h4c0.552 0 1-0.448 1-1s-0.448-1-1-1zM16 11c1.105 0 2-0.896 2-2s-0.895-2-2-2-2 0.896-2 2 0.896 2 2 2zM16-0c-8.836 0-16 7.163-16 16s7.163 16 16 16c8.837 0 16-7.163 16-16s-7.163-16-16-16zM16 30.031c-7.72 0-14-6.312-14-14.032s6.28-14 14-14 14 6.28 14 14-6.28 14.032-14 14.032z"/>
                </svg>
                <span>Информация</span>
              </div>
              <div class="modal_btn_rename" @click="modalWindowName = 'rename'">
                <svg xmlns="http://www.w3.org/2000/svg" fill="#000000" width="32" height="32" viewBox="0 0 64 64" version="1.1" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
                  <path d="M55.944,51.712l0,4.201l-33.652,-0.027l4.71,-4.174l28.942,0Zm-7.555,-43.712c1.649,0 2.505,0.128 4.752,2.011c2.294,1.921 2.707,3.419 2.803,5.087c0.102,1.795 -0.504,3.976 -2.188,5.681l-31.961,31.961c-0.52,0.475 -0.629,0.45 -0.977,0.553l-10.226,2.557c-1.472,0.299 -2.854,-1.049 -2.55,-2.55l2.557,-10.226c0.1,-0.334 0.133,-0.517 0.553,-0.976c10.696,-10.697 21.195,-21.594 32.09,-32.087c1.421,-1.335 3.497,-2.011 5.147,-2.011Zm-32.375,35.182l-1.477,1.477l-1.566,6.262l6.262,-1.566c0.493,-0.492 0.985,-0.983 1.479,-1.474l-4.698,-4.699Zm30.176,-20.573l-4.802,-4.801l-22.493,22.493l4.712,4.713c7.549,-7.448 15.196,-14.801 22.583,-22.405Zm2.826,-2.936c0.618,-0.648 1.234,-1.298 1.848,-1.951c1.673,-1.826 0.443,-5.454 -2.307,-5.578c-0.056,-0.002 -0.112,-0.002 -0.168,-0.002c-0.861,0.016 -1.699,0.372 -2.312,0.977l-1.807,1.808l4.746,4.746Z" style="fill-rule:nonzero;"/>                  
                </svg>
                <span>Переименовать</span>
              </div>
              <div class="modal_btn_del" @click="tryToDelete">
                <svg class="tooltip_del" xmlns="http://www.w3.org/2000/svg" width="32px" height="32px" viewBox="0 0 1024 1024" class="icon" version="1.1">
                  <path d="M667.8 362.1H304V830c0 28.2 23 51 51.3 51h312.4c28.4 0 51.4-22.8 51.4-51V362.2h-51.3z" fill="#CCCCCC"/><path d="M750.3 295.2c0-8.9-7.6-16.1-17-16.1H289.9c-9.4 0-17 7.2-17 16.1v50.9c0 8.9 7.6 16.1 17 16.1h443.4c9.4 0 17-7.2 17-16.1v-50.9z" fill="#CCCCCC"/><path d="M733.3 258.3H626.6V196c0-11.5-9.3-20.8-20.8-20.8H419.1c-11.5 0-20.8 9.3-20.8 20.8v62.3H289.9c-20.8 0-37.7 16.5-37.7 36.8V346c0 18.1 13.5 33.1 31.1 36.2V830c0 39.6 32.3 71.8 72.1 71.8h312.4c39.8 0 72.1-32.2 72.1-71.8V382.2c17.7-3.1 31.1-18.1 31.1-36.2v-50.9c0.1-20.2-16.9-36.8-37.7-36.8z m-293.5-41.5h145.3v41.5H439.8v-41.5z m-146.2 83.1H729.5v41.5H293.6v-41.5z m404.8 530.2c0 16.7-13.7 30.3-30.6 30.3H355.4c-16.9 0-30.6-13.6-30.6-30.3V382.9h373.6v447.2z" fill="#211F1E"/><path d="M511.6 798.9c11.5 0 20.8-9.3 20.8-20.8V466.8c0-11.5-9.3-20.8-20.8-20.8s-20.8 9.3-20.8 20.8v311.4c0 11.4 9.3 20.7 20.8 20.7zM407.8 798.9c11.5 0 20.8-9.3 20.8-20.8V466.8c0-11.5-9.3-20.8-20.8-20.8s-20.8 9.3-20.8 20.8v311.4c0.1 11.4 9.4 20.7 20.8 20.7zM615.4 799.6c11.5 0 20.8-9.3 20.8-20.8V467.4c0-11.5-9.3-20.8-20.8-20.8s-20.8 9.3-20.8 20.8v311.4c0 11.5 9.3 20.8 20.8 20.8z" fill="#211F1E"/>
                </svg>
                <span>Удалить</span>
            </div>
            <div style="display: none;">
              <button>SVG-ICON</button>
              <span>Наличие в плейлистах</span>
            </div>
            </ul>
          </div>
          <div v-else-if="modalWindowName == 'trackinfo'">
            <button @click="modalWindowName = 'main'" style="background-color: rgb#bdbdbd;float: left;">Назад</button>

            <table class="modal_trackinfo_table">
              <tr>
                <th>Название</th>
                <td>{{settingsObject.name}}</td>
              </tr>
              <tr>
                <th>Дата создания</th>
                <td>{{settingsObject.created | formatDate}}</td>
              </tr>
              <tr>
                <th>Кол-во воспроизведений</th>
                <td>{{settingsObject.auditions}}</td>
              </tr>
              <tr>
                <th>Длительность</th>
                <td>{{settingsObject.duration}}</td>
              </tr>
            </table>
          </div>
          <div v-else-if="modalWindowName == 'rename'">
            <button @click="modalWindowName = 'main'" style="background-color: rgb#bdbdbd;float: left;">Назад</button>
            <div class="modal-title">
              {{settingsObject.name}}
            </div>
            <div class="modal_rename">
              <table class="modal_rename_table">
                <tr>
                  <th>Текущее название</th>
                  <td>{{settingsObject.name}}</td>
                </tr>
                <tr>
                  <th>Новое название</th>
                  <td><input type="text" v-model="settingsNewTrackName" oninput='this.value = this.value.replace(/[\\/:*?\"<>|]/g, "")'></td>
                </tr>
              </table>
              <button @click="tryToRename">Переименовать</button>
            </div>
          </div>
          <div v-else-if="modalWindowName == 'delete'">
            <button @click="modalWindowName = 'main'" style="background-color: rgb#bdbdbd;float: left;">Назад</button>
            <div class="modal-title">
              {{settingsObject.name}}
            </div>
          </div>
          <div v-else-if="modalWindowName == 'loading'">
            loading...
          </div>
        </div>
        
      </div>
    <div style="background-color:#9fa2e1;">
        <div class="folder-list">
            <div>
              <div v-if="currentFolder !='/'" style="float: left;">/{{ currentFolder }}</div>
              <div v-else style="float: left;">/</div>
              <div style="float: right;">
                <button v-if="!uploadfilebtn" @click="uploadfilebtn=true">Добавить файл</button>
                <input v-else type="file" @change="uploadFile">
                <span class="tooltip">?</span>
                <input type="text" placeholder="Поиск" v-model="searchInptValue">
              </div>
            </div>
            <ul v-if="loading">
              loading...
            </ul>
            <ul v-else>
                <div v-if="!isSearching">
                <div v-if="showSubfolders">
                  <div class="column-table-btn">
                      <button class="column-date" @click="sort(0,foldersdb[currentFolder])">Дата</button>
                      <button class="column-name" @click="sort(1, foldersdb[currentFolder])">Название</button>
                      <button class="column-duration" @click="sort(2, foldersdb[currentFolder])">Длина</button>
                  </div>
                  <li @click="goUpOneLevel"><span>...</span></li>
                  <li v-for="i in foldersdb[currentFolder]" :key="i.name" class="column-table-div">
                      <div class="column-table" @click="setNameAndObj(i)">
                      <span class="column-date">{{ i.created | formatDate }}</span>
                      <span class="column-name" v-if="i.name == name && isPlaying"><marquee direction="left" behavior="scroll" scrollamount="5">{{ i.name }}</marquee></span>
                      <span class="column-name" v-else-if="i.name == name && !isPlaying">{{ i.name }} </span>
                      <span class="column-name" v-else><button class="play-button" @click="">
                          <i class="fas fa-play"></i>
                        </button> {{ i.name }}</span>
                      <span class="column-duration">{{ i.duration }}</span>
                      </div>
                      <div>
                        <span @click="showModalFunc(i)">
                          <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewBox="0 0 1024 1024"><path fill="#000000" d="M764.416 254.72a351.68 351.68 0 0 1 86.336 149.184H960v192.064H850.752a351.68 351.68 0 0 1-86.336 149.312l54.72 94.72-166.272 96-54.592-94.72a352.64 352.64 0 0 1-172.48 0L371.136 936l-166.272-96 54.72-94.72a351.68 351.68 0 0 1-86.336-149.312H64v-192h109.248a351.68 351.68 0 0 1 86.336-149.312L204.8 160l166.208-96h.192l54.656 94.592a352.64 352.64 0 0 1 172.48 0L652.8 64h.128L819.2 160l-54.72 94.72zM704 499.968a192 192 0 1 0-384 0 192 192 0 0 0 384 0z"/></svg>
                        </span>
                      </div>
                  </li>

                </div>
                <div v-else>
                  <li v-for="folder in folders" @click="loadFiles(folder, 'foldersdb')">{{ folder }}</li>
                </div>
                </div>
                <div v-else>
                  <div class="column-table">
                    <button class="column-date" @click="sort(0, foldersearch)">Дата</button>
                    <button class="column-name" @click="sort(1, foldersearch)">Название</button>
                    <button class="column-duration" @click="sort(2, foldersearch)">Длина</button>
                  </div>
                  <div v-if="foldersearch.length != 0" style="max-height: calc(100vh - 42px);overflow-y: auto;">
                  <li v-for="file in foldersearch" class="column-table" @click="setNameAndObj(file)">
                    <span class="column-date">{{ file.created | formatDate }}</span>
                    <span class="column-name" v-if="file.name == name && isPlaying"><marquee direction="left" behavior="scroll" scrollamount="5">{{ file.name }}</marquee></span>
                    <span class="column-name" v-else-if="file.name == name && !isPlaying">{{ file.name }}</span>
                    <span class="column-name" v-else><button class="play-button">
                        <i class="fas fa-play"></i>
                      </button> {{ file.name }}</span>
                    <span class="column-duration">{{ file.duration }}</span>
                  </li>
                  </div>
                  <div v-else style="height: 50px;text-align: center;">
                    Ничего не найдено!
                  </div>
                </div>
              
              
            </ul>
          </div>
    </div>
    <div>
        <div style="display: none; background-color: bisque;">
            <div style="background-color: red">
                {{name}}<br>
                <button @click="name='Bee Gees - Stayin Alive.mp3'">Bee Gees - Stayin Alive.mp3</button><br>
                <button @click="name='The Rolling Stones - Mother\'s Little Helper.mp3'">The Rolling Stones - Mother\'s Little Helper.mp3</button><br>
                <button @click="name='The Rolling Stones - Paint It, Black.mp3'">The Rolling Stones - Paint It, Black.mp3</button><br>
                <button>Play</button>
            </div>
            <button onclick="playMusic(name)">Play Sound</button>
        </div>
        <div class="container">
          <div class="upper-content">
            <div class="playlist">
              <div class="playlist-buttons">
                <div>
                  Московское время: {{datetime | formatDate}}
                </div>
                <button @click="currentPlaylistWindow ='currentDay'">Текущий плейлист</button>
                <button @click="currentPlaylistWindow ='plan'">Планирование</button>
                <button @click="currentPlaylistWindow ='pattern'">Шаблон</button>
                <button @click="currentPlaylistWindow ='main'">Скрыть</button>
              
                
                <div style="float: right; display: none;">
                  <span>
                    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewBox="0 0 1024 1024"><path fill="#000000" d="M764.416 254.72a351.68 351.68 0 0 1 86.336 149.184H960v192.064H850.752a351.68 351.68 0 0 1-86.336 149.312l54.72 94.72-166.272 96-54.592-94.72a352.64 352.64 0 0 1-172.48 0L371.136 936l-166.272-96 54.72-94.72a351.68 351.68 0 0 1-86.336-149.312H64v-192h109.248a351.68 351.68 0 0 1 86.336-149.312L204.8 160l166.208-96h.192l54.656 94.592a352.64 352.64 0 0 1 172.48 0L652.8 64h.128L819.2 160l-54.72 94.72zM704 499.968a192 192 0 1 0-384 0 192 192 0 0 0 384 0z"/></svg>
                  </span>
                </div>
              </div>
                
              <div class="playlist-window">
                <div v-if="currentPlaylistWindow == 'loading'" class="playlist-on-loading">
                  loading...
                </div>
                <div v-else-if="currentPlaylistWindow =='main'"> 
                    <div class="">

                    </div>
                </div>
                <div v-else-if="currentPlaylistWindow == 'currentDay'">
                  <div style="text-align: center;">
                    Плейлист {{date}}
                  </div>
                  <div v-if="modalWindowPlanName != 'loading'" class="playlist-blocks">
                    <div>
                      <div v-for="i in loaded_blocks_today.length" class="universal-block">
                        <div class="block-toggle" @click="showContentTwo($event, i)" @click.ctrl="showContentSwitcherTwo(showContentToday[i-1].show)">
                          <span v-if="!showContentToday[i-1].show">+</span>
                          <span v-else>-</span>
                        </div>
                        <div class="block-header">
                          <div class="block-title">{{loaded_blocks_today[i-1].block_name}}</div>
                          <div class="block-length">{{loaded_blocks_today[i-1].totalduration}}</div>
                        </div>
                        <div class="block-content" v-if="showContentToday[i-1].show">
                          <div v-if="loaded_blocks_today[i-1].block_tracks" class="block-data">
                            <div class="track" v-for="j in loaded_blocks_today[i-1].block_tracks">
                              <span>
                                <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="32px" height="32px" viewBox="0 0 76 76" version="1.1" baseProfile="full" enable-background="new 0 0 76.00 76.00" xml:space="preserve">
                                  <path fill="#000000" fill-opacity="1" stroke-width="0.2" stroke-linejoin="round" d="M 38,31.6667C 41.4978,31.6667 44.3333,34.5022 44.3333,38C 44.3333,41.4978 41.4978,44.3333 38,44.3333C 34.5022,44.3333 31.6667,41.4978 31.6667,38C 31.6667,34.5022 34.5022,31.6667 38,31.6667 Z M 26.9167,38C 26.9167,41.0606 28.1572,43.8314 30.1629,45.8371L 26.8041,49.1959C 23.9389,46.3306 22.1667,42.3723 22.1667,38C 22.1667,33.6278 23.9389,29.6694 26.8041,26.8041L 30.1629,30.1629C 28.1572,32.1686 26.9167,34.9394 26.9167,38 Z M 49.0833,38C 49.0833,34.9394 47.8428,32.1686 45.8371,30.1629L 49.1958,26.8042C 52.0611,29.6694 53.8333,33.6278 53.8333,38C 53.8333,42.3723 52.0611,46.3306 49.1958,49.1959L 45.8371,45.8371C 47.8428,43.8314 49.0833,41.0606 49.0833,38 Z M 17.4167,38C 17.4167,43.6839 19.7205,48.8298 23.4454,52.5546L 20.0866,55.9134C 15.5022,51.3289 12.6667,44.9956 12.6667,38C 12.6667,31.0044 15.5022,24.6711 20.0866,20.0866L 23.4454,23.4454C 19.7205,27.1702 17.4167,32.3161 17.4167,38 Z M 58.5833,38C 58.5833,32.3161 56.2795,27.1702 52.5546,23.4454L 55.9134,20.0866C 60.4978,24.6711 63.3333,31.0044 63.3333,38C 63.3333,44.9956 60.4978,51.3289 55.9134,55.9134L 52.5546,52.5546C 56.2795,48.8298 58.5833,43.6839 58.5833,38 Z "/>
                                </svg>
                              </span>
                              <span>
                                <svg xmlns="http://www.w3.org/2000/svg" width="32px" height="32px" viewBox="0 0 24 24" fill="none">
                                  <g id="Media / Headphones">
                                  <path id="Vector" d="M19 11C19 7.13401 15.866 4 12 4C8.13401 4 5 7.13401 5 11M16 14.5V16.5C16 16.9647 16 17.197 16.0384 17.3902C16.1962 18.1836 16.8165 18.8041 17.6099 18.9619C17.8031 19.0003 18.0353 19.0003 18.5 19.0003C18.9647 19.0003 19.197 19.0003 19.3902 18.9619C20.1836 18.8041 20.8036 18.1836 20.9614 17.3902C20.9999 17.197 21 16.9647 21 16.5V14.5C21 14.0353 20.9999 13.8026 20.9614 13.6094C20.8036 12.816 20.1836 12.1962 19.3902 12.0384C19.197 12 18.9647 12 18.5 12C18.0353 12 17.8031 12 17.6099 12.0384C16.8165 12.1962 16.1962 12.816 16.0384 13.6094C16 13.8026 16 14.0353 16 14.5ZM8 14.5V16.5C8 16.9647 7.99986 17.197 7.96143 17.3902C7.80361 18.1836 7.18352 18.8041 6.39014 18.9619C6.19694 19.0003 5.96469 19.0003 5.50004 19.0003C5.03539 19.0003 4.80306 19.0003 4.60986 18.9619C3.81648 18.8041 3.19624 18.1836 3.03843 17.3902C3 17.197 3 16.9647 3 16.5V14.5C3 14.0353 3 13.8026 3.03843 13.6094C3.19624 12.816 3.81648 12.1962 4.60986 12.0384C4.80306 12 5.03539 12 5.50004 12C5.9647 12 6.19694 12 6.39014 12.0384C7.18352 12.1962 7.80361 12.816 7.96143 13.6094C7.99986 13.8026 8 14.0353 8 14.5Z" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                  </g>
                                  </svg>
                              </span>
                              <span>{{j.name}}</span>
                              <span style="float: right;">{{j.duration}}</span>
                            </div>
                          </div>
                          <div v-else>
                            пусто
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div v-else-if="currentPlaylistWindow=='pattern'"> 
                    <div style="text-align: center;">Шаблон стандартного плейлиста</div>
                    <div v-if="modalWindowPlanName != 'loading'" class="playlist-blocks">
                      <div>
                        <div v-for="i in loaded_blocks.length" class="universal-block">
                          <div class="block-toggle" @click="showContentOne($event, i)" @click.ctrl="showContentSwitcher(showContent[i-1].show)">
                            <span v-if="!showContent[i-1].show">+</span>
                            <span v-else>-</span>
                          </div>
                          <div class="block-header">
                            <div class="block-title">{{loaded_blocks[i-1].block_name}}</div>
                            <div class="block-length">{{loaded_blocks[i-1].duration}}</div>
                          </div>
                          <div class="block-content" v-if="showContent[i-1].show">
                            <div v-if="loaded_blocks[i-1].track" class="block-data">
                              <div class="track" v-for="j in loaded_blocks[i-1].track.length">
                                <span>
                                  <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="32px" height="32px" viewBox="0 0 76 76" version="1.1" baseProfile="full" enable-background="new 0 0 76.00 76.00" xml:space="preserve">
                                    <path fill="#000000" fill-opacity="1" stroke-width="0.2" stroke-linejoin="round" d="M 38,31.6667C 41.4978,31.6667 44.3333,34.5022 44.3333,38C 44.3333,41.4978 41.4978,44.3333 38,44.3333C 34.5022,44.3333 31.6667,41.4978 31.6667,38C 31.6667,34.5022 34.5022,31.6667 38,31.6667 Z M 26.9167,38C 26.9167,41.0606 28.1572,43.8314 30.1629,45.8371L 26.8041,49.1959C 23.9389,46.3306 22.1667,42.3723 22.1667,38C 22.1667,33.6278 23.9389,29.6694 26.8041,26.8041L 30.1629,30.1629C 28.1572,32.1686 26.9167,34.9394 26.9167,38 Z M 49.0833,38C 49.0833,34.9394 47.8428,32.1686 45.8371,30.1629L 49.1958,26.8042C 52.0611,29.6694 53.8333,33.6278 53.8333,38C 53.8333,42.3723 52.0611,46.3306 49.1958,49.1959L 45.8371,45.8371C 47.8428,43.8314 49.0833,41.0606 49.0833,38 Z M 17.4167,38C 17.4167,43.6839 19.7205,48.8298 23.4454,52.5546L 20.0866,55.9134C 15.5022,51.3289 12.6667,44.9956 12.6667,38C 12.6667,31.0044 15.5022,24.6711 20.0866,20.0866L 23.4454,23.4454C 19.7205,27.1702 17.4167,32.3161 17.4167,38 Z M 58.5833,38C 58.5833,32.3161 56.2795,27.1702 52.5546,23.4454L 55.9134,20.0866C 60.4978,24.6711 63.3333,31.0044 63.3333,38C 63.3333,44.9956 60.4978,51.3289 55.9134,55.9134L 52.5546,52.5546C 56.2795,48.8298 58.5833,43.6839 58.5833,38 Z "/>
                                  </svg>
                                </span>
                                <span>
                                  <svg xmlns="http://www.w3.org/2000/svg" width="32px" height="32px" viewBox="0 0 24 24" fill="none">
                                    <g id="Media / Headphones">
                                    <path id="Vector" d="M19 11C19 7.13401 15.866 4 12 4C8.13401 4 5 7.13401 5 11M16 14.5V16.5C16 16.9647 16 17.197 16.0384 17.3902C16.1962 18.1836 16.8165 18.8041 17.6099 18.9619C17.8031 19.0003 18.0353 19.0003 18.5 19.0003C18.9647 19.0003 19.197 19.0003 19.3902 18.9619C20.1836 18.8041 20.8036 18.1836 20.9614 17.3902C20.9999 17.197 21 16.9647 21 16.5V14.5C21 14.0353 20.9999 13.8026 20.9614 13.6094C20.8036 12.816 20.1836 12.1962 19.3902 12.0384C19.197 12 18.9647 12 18.5 12C18.0353 12 17.8031 12 17.6099 12.0384C16.8165 12.1962 16.1962 12.816 16.0384 13.6094C16 13.8026 16 14.0353 16 14.5ZM8 14.5V16.5C8 16.9647 7.99986 17.197 7.96143 17.3902C7.80361 18.1836 7.18352 18.8041 6.39014 18.9619C6.19694 19.0003 5.96469 19.0003 5.50004 19.0003C5.03539 19.0003 4.80306 19.0003 4.60986 18.9619C3.81648 18.8041 3.19624 18.1836 3.03843 17.3902C3 17.197 3 16.9647 3 16.5V14.5C3 14.0353 3 13.8026 3.03843 13.6094C3.19624 12.816 3.81648 12.1962 4.60986 12.0384C4.80306 12 5.03539 12 5.50004 12C5.9647 12 6.19694 12 6.39014 12.0384C7.18352 12.1962 7.80361 12.816 7.96143 13.6094C7.99986 13.8026 8 14.0353 8 14.5Z" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    </g>
                                    </svg>
                                </span>
                                <span>{{loaded_blocks[i-1].track[j-1].name}}</span>
                              </div>
                            </div>
                            <div v-else>
                              пусто
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div v-else>
                      loading...
                    </div>
                </div>
                <div class="window-plan" v-else-if="currentPlaylistWindow=='plan'">
                  
                  <button v-if="!isPlanChoice" @click="findPlaylist">Открыть плейлист</button>
                  <button v-else-if="isPlanChoice" class="btn_no_border">
                    <div class="form-group">
                      <input type="date" v-model="choiceDate" class="form-control">
                    </div>
                  </button>
                  <button v-if="isPlanChoice" @click="isPlanChoice=false">x</button>
                  <button v-if="!isPlanActive" @click="startPlanning">Создать плейлист</button>
                  <div v-if="isPlanActive" id="modal_plan">
                    <button v-if="modalWindowPlanName != 'loading'" @click="startPlanning" style="background-color: rgb#bdbdbd;float: right;">X</button>
                    <button v-else disabled style="background-color: rgb#bdbdbd;float: right;">X</button>

                    <div class="modal-title" style="margin: 10px;">Генерировать плейлист</div>
                    <button class="btn_no_border">
                      <div class="form-group">
                        <input v-if="modalWindowPlanName=='loading'" disabled type="date" v-model="planDate" class="form-control">
                        <input v-else type="date" v-model="planDate" class="form-control">
                      </div>
                    </button>
                    <div style="
                    height: 35vh;
                    max-height: 35vh;
                    overflow: auto;">
                      {{planPlaylistExist}}
                      <div v-if="planPlaylistExist == 0">
                        День не выбран, статус плейлиста неизвестен
                      </div>
                      <div v-else-if="planPlaylistExist == 1">
                        Плейлист отсутствует
                        <button v-if="modalWindowPlanName != 'loading'" @click="generatePlaylist('new')">Сгенерировать</button>
                      </div>
                      <div v-else-if="planPlaylistExist == 2">
                        Плейлист создан
                        <button style="display: none;" @click="generatePlaylist('exist')">Сгенерировать заново</button>
                      </div>
                      <div v-else-if="planPlaylistExist == 3">
                        плейлист
                        <div class="playlist-blocks">
                          <div>
                            <div v-for="i in generation_blocks.length" class="universal-block">
                              <div class="block-toggle-plan" @click="showContentPlanOne($event, i)" @click.ctrl="showContentPlanSwitcher(showContentPlan[i-1].show)">
                                <span v-if="!showContentPlan[i-1].show">+</span>
                                <span v-else>-</span>
                              </div>
                              <div v-if="selectContentPlan[i-1].selected" class="block-header-plan" style="background-color: aquamarine;" @click="selectContentPlanOne($event, i)" @click.ctrl="selectContentPlanSwitcher(i)">
                                <div class="block-title-plan">{{generation_blocks[i-1].block_name}}</div>
                                
                                <div class="block-length">{{generation_blocks[i-1].duration }}</div>
                              </div>
                              <div v-else class="block-header-plan" @click="selectContentPlanOne($event, i)" @click.ctrl="selectContentPlanSwitcher(i)">
                                <div class="block-title-plan">{{generation_blocks[i-1].block_name}}</div>
                                
                                <div class="block-length">{{generation_blocks[i-1].duration}}</div>
                              </div>
                              <div class="block-content-plan" v-if="showContentPlan[i-1].show">
                                <div v-if="generation_blocks[i-1].track" class="block-data">
                                  <div style="height: 1px;background-color: #856880;"></div>
                                  <div class="track-plan" v-for="j in generation_blocks[i-1].track.length">
                                    <span>
                                      <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="32px" height="32px" viewBox="0 0 76 76" version="1.1" baseProfile="full" enable-background="new 0 0 76.00 76.00" xml:space="preserve">
                                        <path fill="#000000" fill-opacity="1" stroke-width="0.2" stroke-linejoin="round" d="M 38,31.6667C 41.4978,31.6667 44.3333,34.5022 44.3333,38C 44.3333,41.4978 41.4978,44.3333 38,44.3333C 34.5022,44.3333 31.6667,41.4978 31.6667,38C 31.6667,34.5022 34.5022,31.6667 38,31.6667 Z M 26.9167,38C 26.9167,41.0606 28.1572,43.8314 30.1629,45.8371L 26.8041,49.1959C 23.9389,46.3306 22.1667,42.3723 22.1667,38C 22.1667,33.6278 23.9389,29.6694 26.8041,26.8041L 30.1629,30.1629C 28.1572,32.1686 26.9167,34.9394 26.9167,38 Z M 49.0833,38C 49.0833,34.9394 47.8428,32.1686 45.8371,30.1629L 49.1958,26.8042C 52.0611,29.6694 53.8333,33.6278 53.8333,38C 53.8333,42.3723 52.0611,46.3306 49.1958,49.1959L 45.8371,45.8371C 47.8428,43.8314 49.0833,41.0606 49.0833,38 Z M 17.4167,38C 17.4167,43.6839 19.7205,48.8298 23.4454,52.5546L 20.0866,55.9134C 15.5022,51.3289 12.6667,44.9956 12.6667,38C 12.6667,31.0044 15.5022,24.6711 20.0866,20.0866L 23.4454,23.4454C 19.7205,27.1702 17.4167,32.3161 17.4167,38 Z M 58.5833,38C 58.5833,32.3161 56.2795,27.1702 52.5546,23.4454L 55.9134,20.0866C 60.4978,24.6711 63.3333,31.0044 63.3333,38C 63.3333,44.9956 60.4978,51.3289 55.9134,55.9134L 52.5546,52.5546C 56.2795,48.8298 58.5833,43.6839 58.5833,38 Z "/>
                                      </svg>
                                    </span>
                                    <span>
                                      <svg xmlns="http://www.w3.org/2000/svg" width="32px" height="32px" viewBox="0 0 24 24" fill="none">
                                        <g id="Media / Headphones">
                                        <path id="Vector" d="M19 11C19 7.13401 15.866 4 12 4C8.13401 4 5 7.13401 5 11M16 14.5V16.5C16 16.9647 16 17.197 16.0384 17.3902C16.1962 18.1836 16.8165 18.8041 17.6099 18.9619C17.8031 19.0003 18.0353 19.0003 18.5 19.0003C18.9647 19.0003 19.197 19.0003 19.3902 18.9619C20.1836 18.8041 20.8036 18.1836 20.9614 17.3902C20.9999 17.197 21 16.9647 21 16.5V14.5C21 14.0353 20.9999 13.8026 20.9614 13.6094C20.8036 12.816 20.1836 12.1962 19.3902 12.0384C19.197 12 18.9647 12 18.5 12C18.0353 12 17.8031 12 17.6099 12.0384C16.8165 12.1962 16.1962 12.816 16.0384 13.6094C16 13.8026 16 14.0353 16 14.5ZM8 14.5V16.5C8 16.9647 7.99986 17.197 7.96143 17.3902C7.80361 18.1836 7.18352 18.8041 6.39014 18.9619C6.19694 19.0003 5.96469 19.0003 5.50004 19.0003C5.03539 19.0003 4.80306 19.0003 4.60986 18.9619C3.81648 18.8041 3.19624 18.1836 3.03843 17.3902C3 17.197 3 16.9647 3 16.5V14.5C3 14.0353 3 13.8026 3.03843 13.6094C3.19624 12.816 3.81648 12.1962 4.60986 12.0384C4.80306 12 5.03539 12 5.50004 12C5.9647 12 6.19694 12 6.39014 12.0384C7.18352 12.1962 7.80361 12.816 7.96143 13.6094C7.99986 13.8026 8 14.0353 8 14.5Z" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                        </g>
                                        </svg>
                                    </span>
                                    <span>{{generation_blocks[i-1].track[j-1].name}}</span>
                                    <span style="float:right;margin-right: 5px;margin-left: 5px;">{{generation_blocks[i-1].track[j-1].duration}}</span>
                                    <span style="float:right">
                                      
                                      <span v-if="j-1 != 0" @click="plan_file_up(i-1, j-1)" class="modal_plan_playlist_buttons">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="32px" height="32px" viewBox="0 0 24 24" fill="none">
                                          <path fill-rule="evenodd" clip-rule="evenodd" d="M12 3C12.2652 3 12.5196 3.10536 12.7071 3.29289L19.7071 10.2929C20.0976 10.6834 20.0976 11.3166 19.7071 11.7071C19.3166 12.0976 18.6834 12.0976 18.2929 11.7071L13 6.41421V20C13 20.5523 12.5523 21 12 21C11.4477 21 11 20.5523 11 20V6.41421L5.70711 11.7071C5.31658 12.0976 4.68342 12.0976 4.29289 11.7071C3.90237 11.3166 3.90237 10.6834 4.29289 10.2929L11.2929 3.29289C11.4804 3.10536 11.7348 3 12 3Z" fill="#000000"/>
                                          </svg>
                                      </span>
                                      <span v-if="j != generation_blocks[i-1].track.length" @click="plan_file_down(i-1, j-1)" class="modal_plan_playlist_buttons">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="32px" height="32px" viewBox="0 0 24 24" fill="none">
                                          <path fill-rule="evenodd" clip-rule="evenodd" d="M12 3C12.5523 3 13 3.44772 13 4V17.5858L18.2929 12.2929C18.6834 11.9024 19.3166 11.9024 19.7071 12.2929C20.0976 12.6834 20.0976 13.3166 19.7071 13.7071L12.7071 20.7071C12.3166 21.0976 11.6834 21.0976 11.2929 20.7071L4.29289 13.7071C3.90237 13.3166 3.90237 12.6834 4.29289 12.2929C4.68342 11.9024 5.31658 11.9024 5.70711 12.2929L11 17.5858V4C11 3.44772 11.4477 3 12 3Z" fill="#000000"/>
                                        </svg>
                                      </span>
                                      <span v-else style="margin-right: 36px;">

                                      </span>
                                      <span @click="plan_file_del(i-1,j-1)" class="modal_plan_playlist_buttons">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="32px" height="32px" viewBox="0 0 24 24" fill="none">
                                          <g id="Interface / Trash_Full">
                                          <path id="Vector" d="M14 10V17M10 10V17M6 6V17.8C6 18.9201 6 19.4798 6.21799 19.9076C6.40973 20.2839 6.71547 20.5905 7.0918 20.7822C7.5192 21 8.07899 21 9.19691 21H14.8031C15.921 21 16.48 21 16.9074 20.7822C17.2837 20.5905 17.5905 20.2839 17.7822 19.9076C18 19.4802 18 18.921 18 17.8031V6M6 6H8M6 6H4M8 6H16M8 6C8 5.06812 8 4.60241 8.15224 4.23486C8.35523 3.74481 8.74432 3.35523 9.23438 3.15224C9.60192 3 10.0681 3 11 3H13C13.9319 3 14.3978 3 14.7654 3.15224C15.2554 3.35523 15.6447 3.74481 15.8477 4.23486C15.9999 4.6024 16 5.06812 16 6M16 6H18M18 6H20" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                          </g>
                                          </svg>
                                      </span>
                                  </span>
                                  </div>
                                </div>
                                <div v-else>
                                  пусто
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div v-if="isPlanning, modalWindowPlanName!='loading'" class="modal_plan_filesys">
                      <div class="modal_plan_folders">
                        <div v-for="folder in folders" @click="selectPlanFolder1(folder)" class="modal_plan_folder">
                          <span v-if="folder == planFolder1">
                            <svg xmlns="http://www.w3.org/2000/svg" width="32px" height="32px" viewBox="0 0 24 24" fill="none">
                              <path d="M4.24999 18.5001H2.74999V7.50005C2.74471 7.14333 2.80991 6.78907 2.94185 6.45761C3.0738 6.12614 3.2699 5.82399 3.51889 5.56849C3.76789 5.31299 4.06489 5.10917 4.39284 4.96872C4.72079 4.82828 5.07325 4.75396 5.42999 4.75005H7.83999C7.94894 4.74771 8.05712 4.76882 8.15719 4.81195C8.25727 4.85509 8.34689 4.91924 8.41999 5.00005L11.09 8.23005H16C16.3618 8.22863 16.7203 8.29968 17.0542 8.43901C17.3881 8.57834 17.6908 8.78313 17.9443 9.0413C18.1978 9.29948 18.397 9.6058 18.5303 9.94222C18.6635 10.2786 18.728 10.6383 18.72 11.0001V11.5001H17.22V11.0001C17.224 10.8373 17.1954 10.6755 17.1359 10.524C17.0764 10.3725 16.9871 10.2344 16.8734 10.1179C16.7598 10.0014 16.6239 9.90888 16.4739 9.84571C16.3239 9.78253 16.1628 9.75001 16 9.75005H10.73C10.621 9.74982 10.5133 9.7255 10.4148 9.67882C10.3162 9.63215 10.2292 9.56427 10.16 9.48005L7.48999 6.25005H5.42999C5.10815 6.26051 4.8035 6.39778 4.58245 6.63194C4.36141 6.8661 4.2419 7.17815 4.24999 7.50005V18.5001Z" fill="#000000"/>
                              <path d="M17.12 19.25H3.49998C3.37158 19.2489 3.24553 19.2154 3.13362 19.1524C3.0217 19.0895 2.92756 18.9992 2.85998 18.89C2.79599 18.7772 2.76236 18.6497 2.76236 18.52C2.76236 18.3903 2.79599 18.2628 2.85998 18.15L6.23998 11.65C6.3059 11.5297 6.40276 11.4292 6.52056 11.3588C6.63835 11.2885 6.77279 11.2509 6.90998 11.25H20.5C20.6284 11.2511 20.7544 11.2846 20.8663 11.3476C20.9783 11.4105 21.0724 11.5008 21.14 11.61C21.204 11.7228 21.2376 11.8503 21.2376 11.98C21.2376 12.1097 21.204 12.2372 21.14 12.35L17.76 18.85C17.6966 18.966 17.6044 19.0637 17.4923 19.1338C17.3803 19.2038 17.252 19.2439 17.12 19.25ZM4.72998 17.75H16.67L19.27 12.75H7.32998L4.72998 17.75Z" fill="#000000"/>
                            </svg>
                          </span>
                          <span v-else>
                            <svg xmlns="http://www.w3.org/2000/svg" width="32px" height="32px" viewBox="0 0 24 24" fill="none">
                              <path d="M17.5 19.25H6.5C5.77065 19.25 5.07118 18.9603 4.55546 18.4445C4.03973 17.9288 3.75 17.2293 3.75 16.5V7.5C3.75 6.77066 4.03973 6.07118 4.55546 5.55546C5.07118 5.03973 5.77065 4.75 6.5 4.75H9C9.10718 4.74971 9.21323 4.77179 9.31139 4.81484C9.40954 4.85789 9.49762 4.92096 9.57 5L12.34 8.24H17.5C17.862 8.24 18.2204 8.31146 18.5547 8.45029C18.889 8.58911 19.1926 8.79257 19.4481 9.04899C19.7036 9.30541 19.9059 9.60975 20.0435 9.94455C20.1812 10.2794 20.2513 10.638 20.25 11V16.5C20.25 17.2293 19.9603 17.9288 19.4445 18.4445C18.9288 18.9603 18.2293 19.25 17.5 19.25ZM6.5 6.25C6.16848 6.25 5.85054 6.3817 5.61612 6.61612C5.3817 6.85054 5.25 7.16848 5.25 7.5V16.5C5.25 16.8315 5.3817 17.1495 5.61612 17.3839C5.85054 17.6183 6.16848 17.75 6.5 17.75H17.5C17.8315 17.75 18.1495 17.6183 18.3839 17.3839C18.6183 17.1495 18.75 16.8315 18.75 16.5V11C18.75 10.6685 18.6183 10.3505 18.3839 10.1161C18.1495 9.8817 17.8315 9.75 17.5 9.75H12C11.8921 9.74903 11.7856 9.72539 11.6874 9.68059C11.5892 9.6358 11.5015 9.57087 11.43 9.49L8.66 6.25H6.5Z" fill="#000000"/>
                            </svg>
                          </span>
                          <span>{{folder}}</span>
                        </div>
                      </div>
                      <div v-if="planFolder1 !=''" class="modal_plan_files_table">
                        <div>Название</div>
                        <div class="modal_plan_files_buttons" @click="modal_btn_add_start">
                          <svg xmlns="http://www.w3.org/2000/svg" width="18px" height="18px" viewBox="0 0 24 24" fill="none">
                            <g id="Edit / Add_Plus_Circle">
                            <path id="Vector" d="M8 12H12M12 12H16M12 12V16M12 12V8M12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12C21 16.9706 16.9706 21 12 21Z" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </g>
                            </svg>
                            в начало
                          </div>
                        <div class="modal_plan_files_buttons"  style="display: none;">
                          <svg xmlns="http://www.w3.org/2000/svg" width="18px" height="18px" viewBox="0 0 24 24" fill="none">
                          <g id="Edit / Add_Plus_Circle">
                          <path id="Vector" d="M8 12H12M12 12H16M12 12V16M12 12V8M12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12C21 16.9706 16.9706 21 12 21Z" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                          </g>
                          </svg>
                          в середину
                        </div>
                        <div class="modal_plan_files_buttons"  style="display: none;">
                          <svg xmlns="http://www.w3.org/2000/svg" width="18px" height="18px" viewBox="0 0 24 24" fill="none">
                            <g id="Edit / Add_Plus_Circle">
                            <path id="Vector" d="M8 12H12M12 12H16M12 12V16M12 12V8M12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12C21 16.9706 16.9706 21 12 21Z" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </g>
                            </svg>в конец
                          </div>
                        <div style="text-align: right; margin-right: 10px;">Длина</div>
                      </div>
                      <div v-if="planFolder1 !=''" class="modal_plan_files">
                        <div v-for="i in planFolder1db.length" class="modal_plan_files_table_content_box">
                          <div v-if="planFolder1db[i-1].selected" class="modal_plan_files_table_content" style="background-color: rgb(99 255 103);" @click="selectPlanFile($event, i)" @click.ctrl="selectPlanFileSwitcher(i)">
                            <div>{{planFolder1db[i-1].name}}</div>
                            <div style="text-align: right;">{{planFolder1db[i-1].duration}}</div>
                          </div>
                          <div v-else class="modal_plan_files_table_content" @click="selectPlanFile($event, i)" @click.ctrl="selectPlanFileSwitcher(i)">
                            <div>{{planFolder1db[i-1].name}}</div>
                            <div style="text-align: right;">{{planFolder1db[i-1].duration}}</div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div v-else-if="isPlanning, modalWindowPlanName=='loading'">
                      loading...
                    </div>



                    <button v-if="modalWindowPlanName != 'loading', planPlaylistExist != 2" @click="uploadPlaylist">Сформировать</button>
                  </div>
                  <button v-if="isPlanActive" @click="isPlanActive=false">x</button>
                    
                </div>
              </div>
            </div>
          </div>
        <h2 style="position: absolute; font-size: larger;">{{name}}</h2>
          <div class="playback-controls" style="text-align: center;">
            <button id="prev-button" @click="prevTrack"><i class="fa fa-backward"></i></button>
            <button v-if="isPlaying == false" id="play-button" @click="playAudioC(music_obj)"> <svg viewBox="0 0 32 32" width="32" height="32"><path xmlns="http://www.w3.org/2000/svg" d="M5.92 24.096q0 1.088 0.928 1.728 0.512 0.288 1.088 0.288 0.448 0 0.896-0.224l16.16-8.064q0.48-0.256 0.8-0.736t0.288-1.088-0.288-1.056-0.8-0.736l-16.16-8.064q-0.448-0.224-0.896-0.224-0.544 0-1.088 0.288-0.928 0.608-0.928 1.728v16.16z"/></svg> </button>
            <button v-else id="play-button" @click="playAudioC(music_obj)"><svg viewBox="0 0 32 32" width="32" height="32">
              <path xmlns="http://www.w3.org/2000/svg" d="M5.92 24.096q0 0.832 0.576 1.408t1.44 0.608h4.032q0.832 0 1.44-0.608t0.576-1.408v-16.16q0-0.832-0.576-1.44t-1.44-0.576h-4.032q-0.832 0-1.44 0.576t-0.576 1.44v16.16zM18.016 24.096q0 0.832 0.608 1.408t1.408 0.608h4.032q0.832 0 1.44-0.608t0.576-1.408v-16.16q0-0.832-0.576-1.44t-1.44-0.576h-4.032q-0.832 0-1.408 0.576t-0.608 1.44v16.16z"/>
            </svg></button>
            <button id="next-button" @click="nextTrack"><i class="fa fa-forward"></i></button>
            <button id="volume-button" @click="volume" style="margin-left: 20px;"><i class="fa fa-volume-up"></i></button>
            <div class="volume-control">
              <input type="range" min="0" max="100" v-model="volumeProgress" class="progress-bar-vol" @input="updateVolume">
            </div>
          </div>
          <input type="range" min="0" max="1000" v-model="progress" class="progress-bar" @input="updateTime">
          <div class="timer-bar">
            <span class="current-time">{{currentTime}}</span> / <span class="duration">{{totalDuration}}</span>
          </div>
        </div>
        
        

    </div>
    </div>
    <div v-else class="globalLoader">
      <div class="globalLoader_loader">
        loading...
      </div>
    </div>
    </div>


<script type="module" src="scripts/index.js"></script>
<script src="scripts/axios.min.js"></script>
<script src="scripts/moment.min.js"></script>
<script src="scripts/audioworklet-polyfill.min.js"></script>
<script src="styles/all.min.js"></script>
</body>
</html>